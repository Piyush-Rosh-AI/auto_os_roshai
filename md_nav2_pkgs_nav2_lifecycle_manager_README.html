<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Auto OS: Background on lifecycle enabled nodes</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Auto OS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Background on lifecycle enabled nodes </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Using ROS2’s managed/lifecycle nodes feature allows the system startup to ensure that all required nodes have been instantiated correctly before they begin their execution. Using lifecycle nodes also allows nodes to be restarted or replaced on-line. More details about managed nodes can be found on <a href="https://design.ros2.org/articles/node_lifecycle.html">ROS2 Design website</a>. Several nodes in Nav2, such as map_server, planner_server, and controller_server, are lifecycle enabled. These nodes provide the required overrides of the lifecycle functions: <code>on_configure()</code>, <code>on_activate()</code>, <code>on_deactivate()</code>, <code>on_cleanup()</code>, <code>on_shutdown()</code>, and <code>on_error()</code>.</p>
<p>See its <a href="https://docs.nav2.org/configuration/packages/configuring-lifecycle.html">Configuration Guide Page</a> for additional parameter descriptions.</p>
<h2><a class="anchor" id="autotoc_md132"></a>
nav2_lifecycle_manager</h2>
<p>Nav2's lifecycle manager is used to change the states of the lifecycle nodes in order to achieve a controlled <em>startup</em>, <em>shutdown</em>, <em>reset</em>, <em>pause</em>, or <em>resume</em> of the navigation stack. The lifecycle manager presents a <code>lifecycle_manager/manage_nodes</code> service, from which clients can invoke the startup, shutdown, reset, pause, or resume functions. Based on this service request, the lifecycle manager calls the necessary lifecycle services in the lifecycle managed nodes. Currently, the RVIZ panel uses this <code>lifecycle_manager/manage_nodes</code> service when user presses the buttons on the RVIZ panel (e.g.,startup, reset, shutdown, etc.), but it is meant to be called on bringup through a production system application.</p>
<p>In order to start the navigation stack and be able to navigate, the necessary nodes must be configured and activated. Thus, for example when <em>startup</em> is requested from the lifecycle manager's manage_nodes service, the lifecycle managers calls <em>configure()</em> and <em>activate()</em> on the lifecycle enabled nodes in the node list. These are all transitioned in ordered groups for bringup transitions, and reverse ordered groups for shutdown transitions.</p>
<p>The lifecycle manager has a default nodes list for all the nodes that it manages. This list can be changed using the lifecycle manager’s <em>“node_names”</em> parameter.</p>
<p>The diagram below shows an <em>example</em> of a list of managed nodes, and how it interfaces with the lifecycle manager. <img src="./doc/diagram_lifecycle_manager.JPG" alt="" width="100%" align="middle" class="inline"/></p>
<p>The UML diagram below shows the sequence of service calls once the <em>startup</em> is requested from the lifecycle manager.</p>
<p><img src="./doc/uml_lifecycle_manager.JPG" alt="" title="Lifecycle manager UML diagram" width="100%" align="middle" class="inline"/> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
