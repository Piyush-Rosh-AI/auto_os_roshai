<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Auto OS: nav2_behavior_tree</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Auto OS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">nav2_behavior_tree </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This module is used by the nav2_bt_navigator to implement a ROS2 node that executes navigation Behavior Trees for either navigation or autonomy systems. The nav2_behavior_tree module uses the <a href="https://github.com/BehaviorTree/BehaviorTree.CPP">Behavior-Tree.CPP library</a> for the core Behavior Tree processing.</p>
<p>The nav2_behavior_tree module provides:</p><ul>
<li><a class="el" href="classA.html">A</a> C++ template class for easily integrating ROS2 actions and services into Behavior Trees,</li>
<li>Navigation-specific behavior tree nodes, and</li>
<li>a generic BehaviorTreeEngine class that simplifies the integration of BT processing into ROS2 nodes for navigation or higher-level autonomy applications.</li>
</ul>
<p>See its <a href="https://docs.nav2.org/configuration/packages/configuring-bt-xml.html">Configuration Guide Page</a> for additional parameter descriptions and a list of XML nodes made available in this package. Also review the <a href="https://docs.nav2.org/behavior_trees/index.html">Nav2 Behavior Tree Explanation</a> pages explaining more context on the default behavior trees and examples provided in this package. <a class="el" href="classA.html">A</a> <a href="https://docs.nav2.org/plugin_tutorials/docs/writing_new_bt_plugin.html">tutorial</a> is also provided to explain how to create a simple BT plugin.</p>
<p>See the <a href="https://docs.nav2.org/plugins/index.html">Navigation Plugin list</a> for a list of the currently known and available planner plugins.</p>
<h1><a class="anchor" id="autotoc_md82"></a>
The bt_action_node Template and the Behavior Tree Engine</h1>
<p>The <a href="include/nav2_behavior_tree/bt_action_node.hpp">bt_action_node template</a> allows one to easily integrate a ROS2 action into a BehaviorTree. To do so, one derives from the BtActionNode template, providing the action message type. For example,</p>
<div class="fragment"><div class="line"> {C++}</div>
<div class="line">#include &quot;nav2_msgs/action/follow_path.hpp&quot;</div>
<div class="line">#include &quot;nav2_behavior_tree/bt_action_node.hpp&quot;</div>
<div class="line"> </div>
<div class="line">class FollowPathAction : public BtActionNode&lt;nav2_msgs::action::FollowPath&gt;</div>
<div class="line">{</div>
<div class="line">    ...</div>
<div class="line">};</div>
</div><!-- fragment --><p>The resulting node must be registered with the factory in the Behavior Tree engine in order to be available for use in Behavior Trees executed by this engine.</p>
<div class="fragment"><div class="line"> {C++}</div>
<div class="line">BehaviorTreeEngine::BehaviorTreeEngine()</div>
<div class="line">{</div>
<div class="line">    ...</div>
<div class="line"> </div>
<div class="line">  factory_.registerNodeType&lt;nav2_behavior_tree::FollowPathAction&gt;(&quot;FollowPath&quot;);</div>
<div class="line"> </div>
<div class="line">    ...</div>
<div class="line">}</div>
</div><!-- fragment --><p>Once a new node is registered with the factory, it is now available to the BehaviorTreeEngine and can be used in Behavior Trees. For example, the following simple XML description of a BT shows the FollowPath node in use:</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">root</span> <span class="keyword">BTCPP_format</span>=<span class="stringliteral">&quot;4&quot;</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">BehaviorTree</span> <span class="keyword">ID</span>=<span class="stringliteral">&quot;MainTree&quot;</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">Sequence</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;root&quot;</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">ComputePathToPose</span> <span class="keyword">goal</span>=<span class="stringliteral">&quot;${goal}&quot;</span>/&gt;</div>
<div class="line">      &lt;<span class="keywordtype">FollowPath</span> <span class="keyword">path</span>=<span class="stringliteral">&quot;${path}&quot;</span> <span class="keyword">controller_property</span>=<span class="stringliteral">&quot;FollowPath&quot;</span>/&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">Sequence</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">BehaviorTree</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">root</span>&gt;</div>
</div><!-- fragment --><p> The BehaviorTree engine has a run method that accepts an XML description of a BT for execution:</p>
<div class="fragment"><div class="line">{C++}</div>
<div class="line"> BtStatus run(</div>
<div class="line">   BT::Blackboard::Ptr &amp; blackboard,</div>
<div class="line">   const std::string &amp; behavior_tree_xml,</div>
<div class="line">   std::function&lt;void()&gt; onLoop,</div>
<div class="line">   std::function&lt;bool()&gt; cancelRequested,</div>
<div class="line">   std::chrono::milliseconds loopTimeout = std::chrono::milliseconds(10));</div>
</div><!-- fragment --><p>See the code in the <a href="../nav2_bt_navigator/src/bt_navigator.cpp">BT Navigator</a> for an example usage of the BehaviorTreeEngine.</p>
<p>For more information about the behavior tree nodes that are available in the default BehaviorTreeCPP library, see documentation here: <a href="https://www.behaviortree.dev/docs/3.8/learn-the-basics/BT_basics">https://www.behaviortree.dev/docs/3.8/learn-the-basics/BT_basics</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
