<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Auto OS: ROS 2 Navigation System Requirements</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Auto OS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">ROS 2 Navigation System Requirements </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The ROS 2 Navigation System ("Navigation System") is the control system that enables a robot to autonomously reach a goal state, such as a specific position and orientation relative to a given map. Provided with a navigation command to execute, the Navigation System generates a plan to achieve the desired result and outputs control commands to autonomously direct the robot, respecting any safety constraints and avoiding obstacles encountered along the way.</p>
<p>This document lists the requirements for the ROS 2 Navigation System. The ROS 2 Navigation System is intended to be a generalization of the ROS 1 navigation stack and will address some of its known limitations.</p>
<h1><a class="anchor" id="autotoc_md25"></a>
1. Introduction</h1>
<p>This section describes the format of each requirement, the keywords available for use in the definition of each requirement, and the basic concepts needed to define and understand the requirements.</p>
<h2><a class="anchor" id="autotoc_md26"></a>
1.1 Requirement Fields</h2>
<p>Each requirement is presented in tabular form with the following fields:</p>
<ul>
<li><b>Id</b> - <a class="el" href="classA.html">A</a> unique identifier for the requirement</li>
<li><b><a class="el" href="classHandle.html">Handle</a></b> - <a class="el" href="classA.html">A</a> short, scoped, description summarizing the essence of the requirement</li>
<li><b>Priority</b> - An associated priority level: <b>1</b> (high), <b>2</b> (medium), and <b>3</b> (low)</li>
<li><b>Requirement</b> - The requirement itself, stated in clear, concise requirements language</li>
<li><b>Notes</b> - Elaboration and related information for the requirement</li>
</ul>
<h2><a class="anchor" id="autotoc_md27"></a>
1.2 Requirement Language Keywords</h2>
<p>In the requirements specified below, certain keywords have a specific meaning as they appear in the text. These keywords are defined as follows and must be capitalized whenever used in a manner intended to specify a behavior or requirement.</p>
<ol type="1">
<li><b>MUST</b>: This word, or the terms "REQUIRED" or "SHALL", mean that the definition is an absolute requirement of the specification.</li>
<li><b>MUST NOT</b>: This phrase, or the phrase "SHALL NOT", mean that the definition is an absolute prohibition of the specification.</li>
<li><b>SHOULD</b>: This word, or the adjective "RECOMMENDED", mean that there may exist valid reasons in particular circumstances to ignore a particular item, but the full implications must be understood and carefully weighed before choosing a different course.</li>
<li><b>SHOULD NOT</b>: This phrase, or the phrase "NOT RECOMMENDED" mean that there may exist valid reasons in particular circumstances when the particular behavior is acceptable or even useful, but the full implications should be understood and the case carefully weighed before implementing any behavior described with this label.</li>
<li><b>MAY</b>: This word, or the adjective "OPTIONAL", mean that an item is truly optional. An implementation which does not include a particular option MUST be prepared to interoperate with another implementation which does include the option, though perhaps with reduced functionality. In the same vein an implementation which does include a particular option MUST be prepared to interoperate with another implementation which does not include the option (except, of course, for the feature the option provides).</li>
</ol>
<p>These definitions are derived from the <a href="https://tools.ietf.org/html/bcp14">IETF Best Current Practices Document 14</a>.</p>
<h2><a class="anchor" id="autotoc_md28"></a>
1.3 Terminology</h2>
<p>This section defines some common terminology as used in this document.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Term   </th><th class="markdownTableHeadNone">Definition    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Path   </td><td class="markdownTableBodyNone"><a class="el" href="classA.html">A</a> <em>Path</em> is an ordered sequence of points in space.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Route   </td><td class="markdownTableBodyNone"><a class="el" href="classA.html">A</a> <em>Route</em> is a synonym for Path.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Trajectory   </td><td class="markdownTableBodyNone"><a class="el" href="classA.html">A</a> <em>Trajectory</em> is a path parameterized by time.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Path Planning   </td><td class="markdownTableBodyNone"><em>Path Planning</em> refers to the process of finding an optimal path between multiple locations. Path planning is typically characterized as a graph traversal problem and algorithms such as A*, D*, and RRT are common choices for implementation.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Motion Planning   </td><td class="markdownTableBodyNone"><em>Motion Planning</em> refers to the process of specifying the motion of the robot over time to follow a specific path.   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md29"></a>
1.4 Use Cases</h2>
<p>The Navigation System is part of a larger system that includes a person or automated system ("the user") directing the operation of one or more robots. To provide context for the Navigation System, this section lists the expected interactions between the user and the robot system.</p>
<h2><a class="anchor" id="autotoc_md30"></a>
1.4.1 Mapping Use Cases</h2>
<p>The user will typically create a map of the area in which the robot is to navigate, either manually or using the SLAM algorithm. This map identifies significant features of the environment, including fixed features, such as walls and fixed obstacles, and virtual features, such as navigation lanes and safety zones. While the creation of the map itself is outside the scope of the Navigation System, the system is dependent on the map format(s). The map will need to be rich enough to support the Navigation System requirements listed in this document.</p>
<p>The following use case diagram shows an example of the kinds of operations provided by a mapping interface.</p>
<p><img src="./images/Mapping-Use-Cases.png" alt="Mapping Use Cases" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md31"></a>
1.4.2 Mission Planning Use Cases</h2>
<p>Another area in which the user interacts with the system is in the creation of a mission plan for the robot. The user composes a sequence of primitive navigation commands, such as <b>Navigate to Pose</b>, <b>Navigate to Area</b>, <b>Maintain Pose</b>, etc., into an overall plan. While mission planning is also outside the scope of the Navigation System, the mission plan format should be sufficient to meet the Navigation System requirements listed in this document.</p>
<p><img src="./images/Mission-Planning-Use-Cases.png" alt="Mission Planning Use Cases" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md32"></a>
1.4.3 Mission Execution Use Cases</h2>
<p>The user will be able to initiate the execution of specific mission plans ("missions") and should also be able to view the status of the mission in progress, as well as cancel the mission that is currently in progress. In addition, the user may be required to provide the robot with its initial pose if the robot is not able to determine it automatically.</p>
<p><img src="./images/Mission-Execution-Use-Cases.png" alt="Mission Execution Use Cases" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md33"></a>
1.5 Architectural Components</h2>
<p>The Navigation System is part of a larger software system. This document does not specify the architecture for the complete system, but simply gives a conceptual overview for the purpose of requirements definition.</p>
<p>The Navigation System has a <em>command chain</em>, where each level refines its command input into successively more specific operations for the lext level down, and <em>support modules</em> which are used by modules in the command chain.</p>
<h2><a class="anchor" id="autotoc_md34"></a>
1.5.1 Command Chain</h2>
<p>The command chain is the sequence of modules that comprise the chain of command from the user, at the top, to the robot, at the bottom.</p>
<ul>
<li><b>Mission Planning</b> - Mission Planning provides an interface to the user to allow the user to create mission plans and assign them to robots for execution. <a class="el" href="classA.html">A</a> <em>Mission Plan</em> is a sequence of <em>Navigation Commands</em> along with associated information about how the commands should be carried out.</li>
<li><b>Mission Execution</b> - Mission Execution receives the Mission Plan and is responsible to execute the plan and report progress on its execution.</li>
<li><b>Navigation System</b> - The Navigation System receives a segment of an overall plan to execute (a <em>Navigation Command</em>) and generates the control commands to the robot to carry it out.</li>
<li><b>Robot Interface</b> - The Robot Interface is an abstraction of the robot platform, providing the means for the Navigation System to control the robot, learn about its capabilities, and receive feedback from the robot.</li>
</ul>
<p>The following diagram shows the modules in the command chain and the successive refinement of the control commands:</p>
<p><img src="./images/Context.png" alt="Command Chain" class="inline"/></p>
<p>The Navigation System itself can be decomposed into two general responsibilities, <em>Planning</em>, and <em>Execution</em>.</p>
<ul>
<li><b>Planning</b> - The Planning Module is responsible to execute Navigation Commands. To do so, this module can evaluate input maps and continually assess the robot's environment to plan motion and provide the path for the robot to follow to achieve completion of the Navigation Command.</li>
<li><b>Execution</b> - The Execution Module is responsible to execute the path provided by Planning, generating the control commands required to follow the path.</li>
</ul>
<p><img src="./images/Navigation-System.png" alt="Navigation System" class="inline"/></p>
<p>Decomposing the Navigation System, the overall command chain is as follows:</p>
<p><img src="./images/Command-Pipeline.png" alt="Command Pipeline" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md35"></a>
1.5.2 Support Modules</h2>
<p>In addition to the command chain, there are several supporting modules and subsystems required for a complete system. The implementation of these modules is outside the scope of the Navigation System. However, the interface to these components is in scope and the associated requirements should be defined. Together, the support modules provide the robot with a full picture of the robot's environment.</p>
<ul>
<li><b>Mapping</b> - The Mapping Subsystem generates maps that can be used by the Navigation System to plan the robot's motion. Maps are typically created in advance and are available to the Navigation System. <a class="el" href="classA.html">A</a> map can be updated to reflect changes in the environment. The frequency of these updates will vary among implementations.</li>
<li><b>Perception</b> - The Perception Subsystem utilizes sensors to develop an understanding of the dynamic environment around the robot. This information is available to the Navigation System, such as when avoiding obstacles in the robot's path.</li>
<li><b>Prediction</b> - The Prediction Subsystem anticipates future motion trajectories of any perceived objects.</li>
<li><b>Localization</b> - The Localization Subsystem provides the current location of the robot.</li>
</ul>
<p>In a complete robot system these modules are available to the core navigation modules (the command chain), as shown in the following diagram:</p>
<p><img src="./images/With-Support-Modules.png" alt="Command Pipeline with Support" class="inline"/></p>
<p>To facilitate error recovery, each module in the command chain, if it is unable to carry out its task, should be able to propagate error information to its predecessor in the chain.</p>
<h2><a class="anchor" id="autotoc_md36"></a>
1.6 Design Goals</h2>
<p>The Navigation System should meet the following high-level design goals:</p>
<ul>
<li><b>Extensibility</b> - The Navigation System should be a <em>pluggable framework</em> to allow for other developers to easily extend the capabilities of the Navigation System, such as adding the ability to handle new navigation commands.</li>
<li><b>Modularity</b> - The Navigation System should allow developers to <em>easily replace components</em> with alternative implementations.</li>
<li><b>Generality</b> - The Navigation System should not introduce inherent limitations in the architectural blocks. For example, it should support multiple kinds of robots, not making assumptions about robot capabilities and limitations and should support various map types and orientations.</li>
<li><b>Performance</b> - <em>TODO: What are the performance goals?</em></li>
<li><b>Scalability</b> - <em>TODO: What are the scalability goals?</em></li>
<li><em>TODO: Other important design goals to call out?</em></li>
</ul>
<h1><a class="anchor" id="autotoc_md37"></a>
2.0 Requirements</h1>
<p>This section lists the requirements for the Navigation System.</p>
<h2><a class="anchor" id="autotoc_md38"></a>
2.1 Implementation Constraints</h2>
<p>There are various constraints on the development of the ROS 2 Navigation stack.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Id   </th><th class="markdownTableHeadNone"><a class="el" href="classHandle.html">Handle</a>   </th><th class="markdownTableHeadNone">Priority   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Notes    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">IC001   </td><td class="markdownTableBodyNone">Developer's Guide   </td><td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">The Navigation System SHOULD be developed in accordance with the ROS 2 Developer's Guide   </td><td class="markdownTableBodyNone"><a href="https://github.com/ros2/ros2/wiki/Developer-Guide">ROS 2 Developer's Guide</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">IC002   </td><td class="markdownTableBodyNone">Implementation Language.C++.Version   </td><td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Developers SHALL assume the availability of C++14 language features   </td><td class="markdownTableBodyNone">Per the ROS 2 Developer's Guide    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">IC003   </td><td class="markdownTableBodyNone">Implementation Language.C++.API Preference   </td><td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Developers SHOULD prefer standard C++, then Boost, then custom code, in that order.   </td><td class="markdownTableBodyNone">Boost may be used if equivalent functionality is not already available in the C++ standard library   </td></tr>
</table>
<p>IC004 | Implementation Language.C++.Supported Compilers.g++ | 1 | The Navigation System code SHALL compile with gcc 5.4 or newer IC005 | Implementation Language.C++.Supported Compilers.Clang | 1 | The Navigation System code SHALL compile with Clang, version <em>x</em> IC006 | Implementation Language.C++.Supported Compilers.Intel C++ Compiler | 1 | The Navigation System code SHOULD compile with the Intel C++ Compiler, version <em>x</em> | Could be useful for optimization purposes IC007 | Implementation Language.Python.Version | 1 | Any Python code developed for the Navigation System MUST use Python 3 IC008 | Implementation Language.GUI | 1 | Any GUIs developed as part of the Navigation System SHOULD use the Qt library, via C++ or Python (PyQt) | <em>Which version?</em> IC009 | Implementation Language.GUI.QML | 1 | Any GUIs developed as part of the Navigation System MAY use QML IC010 | ROS2.Version | 1 | The first revision of the Navigation System WILL target the Crystal Clemmys release of ROS2. | We should develop against the latest ROS2 code whenever possible.</p>
<h2><a class="anchor" id="autotoc_md39"></a>
2.2 Target Platforms</h2>
<p>Navigation System will run on the latest versions of the operating systems supported by the core ROS 2 code.</p>
<p>Id | <a class="el" href="classHandle.html">Handle</a> | Priority | Description | Notes &ndash; | ---&mdash; | -----&mdash; | --------&mdash; | --&mdash; TP001 | Target Platforms.Operating Systems.Ubuntu | 1 | The Navigation System MUST support Ubuntu Desktop 16.04 and Ubuntu Desktop 18.04 TP002 | Target Platforms.Operating Systems.MacOS | 1 | The Navigation System MUST support MacOS 10.13 (High Sierra) and MacOS 10.14 (Mohave) TP003 | Target Platforms.Operating Systems.Windows | 1 | The Navigation System MUST support Windows 10 Professional TP004 | Target Platforms.Operating Systems.Clear Linux | 1 | The Navigation System SHOULD support the Intel's Clear Linux distribution | Clear Linux uses a continuous deployment model. TP005 | Target Platforms.CPU.Word Size | 1 | The Navigation System SHALL support 64-bit processors | Don't assume a specific pointer size TP006 | Target Platforms.Minimum Platform | 1 | <em>TODO: Should we specify a minimum target platform? Or, should this be expressed as minimum platform requirements?</em></p>
<h2><a class="anchor" id="autotoc_md40"></a>
2.3 Command Chain Modules</h2>
<p>This section lists the requirements for the core command chain modules in the Navigation System.</p>
<h3><a class="anchor" id="autotoc_md41"></a>
2.3.1 Mission Planning</h3>
<p><a class="el" href="classA.html">A</a> complete system should have some kind of Mission Planning subsystem to convey the user's intentions to the robot. The User interacts with this Mission Planning subsystem to generate a Mission Plan for the robot. The Mission Plan is defined as a sequence of Navigation Commands, along with any associated information about how and when the plan should be carried out. The design and implementation of a Mission Planning subsystem is outside the scope of the Navigation System. However, in order to understand the larger system context and how Mission Planning interacts with the Navigation System, this section will consider the nature of a mission plan and the kinds of operations it may contain.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Id   </th><th class="markdownTableHeadNone"><a class="el" href="classHandle.html">Handle</a>   </th><th class="markdownTableHeadNone">Priority   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Notes    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">MP001   </td><td class="markdownTableBodyNone">Mission Planning.Navigation Commands   </td><td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">The Mission Plan MUST be able to express the plan as a coordinated sequence of Navigation Commands.   </td><td class="markdownTableBodyNone">Could include time and policy aspects (<em>when</em> and <em>how</em>, not just <em>what</em>)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">MP002   </td><td class="markdownTableBodyNone">Mission Planning.Navigation Commands.Composition   </td><td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">The Mission Plan SHOULD allow for the composition and naming of new Navigation Commands from a sequence of previously-defined Navigation Commands.   </td><td class="markdownTableBodyNone">Build up levels of abstraction. For example, Enter-Elevator could be expressed as Navigate-to-Pose (right outside of elevator), Wait (for door to open), Navigate-to-Pose (inside the elevator).   </td></tr>
</table>
<p>MP003 | Mission Planning.Navigation Commands.Navigate to Pose | 1 | The Mission Plan MUST be able to convey the information required for a robot to navigate from its current location to a specific destination pose. MP004 | Mission Planning.Navigation Commands.Navigate to Area | 2 | The Mission Plan SHOULD be able to convey the information required for a robot to navigate from its current location to a specific area. | An "area" could be a rectangular region or a more complex shape. It may be defined as tolerance to a goal (ie. within +/- 1 meter distance). MP005 | Mission Planning.Navigation Commands.Enqueue | 2 | The Mission Plan SHOULD be able to convey the information required for a robot to navigate from its current location to a position behind another specified robot. MP006 | Mission Planning.Navigation Commands.Follow | 2 | The Mission Plan SHOULD be able to convey the information required for a robot to be able to follow another specified robot. | This one doesn't have a completion state (reaching the goal), unless it specifies additional information such as "follow until destination reached." MP007 | Mission Planning.Navigation Commands.Maintain Pose | 1 | The Mission Plan SHOULD be able to convey the information required for a robot to maintain its current pose. | Could be indefinite or time-based. MP008 | Mission Planning.Navigation Commands.Park | 2 | The Mission Plan SHOULD be able to convey the information required for a robot to park itself. | The implementation of the parking command could interact with the robot to cause it, for example, to shut down or enter a low-power state. MP009 | Mission Planning.Navigation Commands.Dock to Charger | 2 | The Mission Plan SHOULD be able to convey the information required for a robot to dock to a specific charging station. MP010 | Mission Planning.Policy | 1 | The Mission Plan SHOULD be able to express information about how and when the navigation commands are to be carried out. | Time and safety constraints. MP011 | Mission Planning.Policy.Time.Initiation | 1 | The Mission Plan SHOULD be able to convey when a mission should begin. MP012 | Mission Planning.Policy.Time.Completion | 1 | The Mission Plan SHOULD be able to convey by when a mission should end. MP013 | Mission Planning.Policy.Safety.Maximum Speed | 1 | The Mission Plan SHOULD be able to convey a maximum speed for the robot. | The robot would respect this value in carrying out the plan. This could be site-specific policy. MP014 | Mission Planning.Policy.Safety.Minimum Safety Buffer | 1 | The Mission Plan SHOULD be able to convey a minimum safety buffer distance. | The robot would respect this value and maintain the distance from other objects at all times. Should vary with relative velocities.</p>
<h3><a class="anchor" id="autotoc_md42"></a>
2.3.2 Mission Execution</h3>
<p>The Mission Execution module has the responsibility to execute a provided mission. It provides each successive Navigation Command to the Navigation Subsystem, monitoring and reporting progress towards completion of the plan.</p>
<p>Id | <a class="el" href="classHandle.html">Handle</a> | Priority | Description | Notes &ndash; | ---&mdash; | -----&mdash; | --------&mdash; | --&mdash; ME001 | Mission Execution.Inputs.Mission Plan | 1 | The Mission Execution module MUST accept the Mission Plan to execute. ME002 | Mission Execution.Inputs.Commands.Execute Mission | 1 | When commanded to do so, the Mission Execution module MUST execute the provided Mission Plan, respecting any specified constraints. ME003 | Mission Execution.Inputs.Commands.Cancel Mission | 1 | When commanded to do so, the Mission Execution module MUST interrupt the Robot's navigation and cancel the current mission. ME004 | Mission Execution.Outputs.Navigation Command | 1 | Upon completion of each Navigation Command, the Mission Execution module SHALL output the next Navigation Command to execute. ME005 | Mission Execution.Command Sequencing | 1 | The Mission Execution module MUST monitor for completion of each Navigation Command before sending the next command. ME006 | Mission Execution.Logging | 1 | The Mission Execution module SHOULD log its activity. | In case of forensic analysis of a safety event, for example. ME007 | Mission Execution.Feedback.Inputs.Error Recovery | 1 | Upon receipt of a downstream failure (unable to execute the Navigation Command), the Mission Execution module SHOULD attempt to recover and continue execution of the mission. ME008 | Mission Execution.Feedback.Outputs.Progress Notification | 1 | The Mission Execution module SHALL provide progress notifications on the execution of the mission. | Intermediate steps of interest. ME009 | Mission Execution.Feedback.Outputs.Mission Completed | 1 | Upon successfull completion of the mission, the Mission Execution module SHALL output a corresponding notification. ME010 | Mission Execution.Feedback.Outputs.Mission Canceled | 1 | Upon receiving a cancellation command and cancelling the mission, the Mission Execution module SHALL output a corresponding notification. ME011 | Mission Execution.Feedback.Outputs.Mission Failure | 1 | If the Mission Execution module is unable to execute the mission, it MUST output a failure notification. | This would be received by the user-level interface and could necessitate user intervention, such as having a remote operating center where the remote operator "rescues" the robot. ME012 | Mission Execution.Safe State Upon Failure | 1 | If the Mission Execution module is unable to execute the mission, it MUST direct the robot to a safe state. | The failure could be for a variety of reasons - sensor failures, algorithmic failure, a collision, etc. ME013 | Mission Execution.Selection of Planners | 1 | The Navigation System SHOULD allow the association and use of specific Planning and Execution Modules for a given Navigation Command. | For example, a user may want to have components for classic point-A-to-point-B travel, but upon reaching point <a class="el" href="classB.html">B</a>, have specialized components that control a series of maneuvers such as docking to a charging station or a conveyor belt.</p>
<h3><a class="anchor" id="autotoc_md43"></a>
2.3.3 Navigation System.Planning</h3>
<p>The Navigation System's Planning Module receives the Navigation Command from the Mission Execution module and is responsible to implement that command. To do so, the Planning Module can use information from the Mapping Subsystem to plan a route and use input from the Perception Subsystem to evaluate the dynamic environment and avoid collisions with objects crossing its path.</p>
<p>Id | <a class="el" href="classHandle.html">Handle</a> | Priority | Description | Notes &ndash; | ---&mdash; | -----&mdash; | --------&mdash; | --&mdash; PLN001 | Planning | 1 | The Navigation System SHOULD have a Planning Module that generates the Path for the robot to follow to implement a specified Navigation Command. PLN002 | Planning.Inputs.Navigation Command | 1 | The Planning Module SHALL receive the Navigation Command to execute. PLN003 | Planning.Inputs.Policy | 1 | The Planning Module SHALL receive policy information associated with the Navigation Command to execute. | This could be global policy and/or per-command policy. Policy could contain, for example, a list of conventions for the robot to follow (navigate on the right side of a path, for example). PLN004 | Planning.Inputs.Mapping.Maps | 1 | The Planning Module MUST have access to one or more maps available that describe the robot's environment. PLN005 | Planning.Inputs.Perception.Sensory Input | 1 | The Planning Module MUST have access to data from the Perception Subsystem. PLN006 | Planning.Inputs.Prediction.Predicted Trajectories | 1 | The Planning Module MAY have access to predicted trajectories of objects detected by the Perception Subsystem. | In simple planners, there is no prediction of moving objects, but in more complex planners, this may be considered. PLN007 | Planning.Inputs.Localization.Current Pose | 1 | The Planning Module MUST have access to the robot's current pose. | The pose could be be provided manually or automatically determined (outside of this module). PLN008 | Planning.Outputs.Path | 1 | The Planning Module SHOULD output the Path for the robot to follow to execute the input Navigation Command and MUST respect any associated policy. PLN009 | Planning.Feedback.Inputs | 1 | The Planning Module MAY receive error input from the downstream Execution Module. | So that it can attempt to recover from execution failures. PLN010 | Planning.Feedback.Inputs.Error Recovery | 1 | Upon receipt of a downstream failure, the Planning Module SHOULD attempt to automatically recover from the error. | Handling a robot that gets stuck or handling a collision, for example. PLN011 | Planning.Feedback.Outputs.Command Completed | 1 | Upon completing the provided Navigation Command, the Planning Module MUST report this event on its feedback output. PLN012 | Planning.Feedback.Outputs.Unable to Execute Command | 1 | If the Planning Module is unable to execute the Navigation Command, it SHALL report the error on its feedback output. | It should handle errors if possible, but report back if it can't. PLN013 | Planning.Feedback.Outputs.Error Propagation | 1 | The Planning Module SHOULD propagate errors that it can't handle. PLN014 | Planning.Logging | 1 | The Planning Module SHOULD log significant events. | Commands completed, failures, recoveries, etc. PLN015 | Planning.Documentation | 1 | The Navigation System SHOULD provided detailed documentation on how to develop a Planning Module. PLN016 | Planning.Simple Example | 1 | The Navigation System SHOULD provided a simple example of a Planning Module. | An easily understood module that developers and students could use as a starting point.</p>
<h3><a class="anchor" id="autotoc_md44"></a>
2.3.4 Navigation System.Execution</h3>
<p>The Navigation System's Execution Module is responsible to execute the Path specified by the Planning Module. It has available to it all of the information from the support modules and must respect any policy guidance.</p>
<p>Id | <a class="el" href="classHandle.html">Handle</a> | Priority | Description | Notes &ndash; | ---&mdash; | -----&mdash; | --------&mdash; | --&mdash; EXE001 | Execution | 1 | The Navigation System SHOULD have an Execution Module that generates commands to the robot to achieve a specific Path. EXE002 | Execution.Inputs.Path | 1 | The Execution Module SHALL receive a Path that the robot is to follow. EXE003 | Execution.Inputs.Policy | 1 | The Execution Module SHALL receive policy information associated with the Path to follow. | Could filter down from higher-level policy specification. EXE004 | Execution.Collision Avoidance.Avoid Stationary Objects | 1 | The Execution Module MUST direct the robot such that it avoids colliding into stationary objects in its environment. EXE005 | Execution.Collision Avoidance.Avoid Moving Objects | 1 | The Execution Module MUST direct the robot such that it avoids colliding into moving objects that intercept its path. EXE006 | Execution.Collision Detection | 1 | The Execution Module SHOULD detect if a collision has occurred. EXE007 | Execution.Collision Detection.Latency | 1 | The Execution Module SHOULD detect collisions within 50ms. | <em>TODO: What is the right value?</em> EXE008 | Execution.Feedback.Inputs.Robot Malfunction | 1 | The Execution Module SHOULD receive notifications of any robot malfunctions from the downstream robot interface. | <a class="el" href="classA.html">A</a> sensor failure, for example. EXE009 | Execution.Feedback.Outputs.Collision Detected | 1 | The Execution Module SHOULD report the detection of a collision. | So that the Planning Module can attempt recovery or otherwise respond. EXE010 | Execution.Feedback.Outputs.Error Propagation | 1 | The Execution Module SHOULD propagate errors that it can't handle. EXE011 | Execution.Documentation | 1 | The Navigation System SHOULD provided detailed documentation on how to develop an Execution Module. EXE012 | Execution.Simple Example | 1 | The Navigation System SHOULD provided a simple example of an Execution Module| An easily understood module that developers and students could use as a starting point.</p>
<h3><a class="anchor" id="autotoc_md45"></a>
2.3.5 Robot Interface</h3>
<p>There should be a uniform interface to the various supported robots. The abstraction of different robots may be handled by current mechanisms, such as UDRF, Twist commands, etc. We should consider if anything else is needed here. The user should be able to specify different types of robot drive types, such as Ackerman (automobile) steering, and robot shapes.</p>
<p>Id | <a class="el" href="classHandle.html">Handle</a> | Priority | Description | Notes &ndash; | ---&mdash; | -----&mdash; | --------&mdash; | --&mdash; RI001 | Robot Interface.Attributes | 1 | Holonomicity, max/min speeds and accelerations, etc. RI002 | Robot Interface.Dynamic Switching | 1 | Can the robot dynamically change attributes? RI003 | Robot Interface.Safety.Limited Parameters | 1 | <a class="el" href="classA.html">A</a> list of parameters used to limit certain circumstances and provide the hooks for users to set those values if they want RI004 | Robot Interface.Safety.Speed Limiting | 1 | <em>TODO</em> RI005 | Robot Interface.Safety.Force Limiting | 1 | <em>TODO</em> RI006 | Robot Interface.EMO Button | 1 | <em>TODO</em> RI007 | Robot Interface.Feedback.Outputs | 1 | <em>TODO</em></p>
<h2><a class="anchor" id="autotoc_md46"></a>
2.4 Support Modules</h2>
<p>There are a few support modules and subsystems that are not part of the Navigation System proper, but are necessary components in a complete system. The Navigation System depends on the data interfaces to these components. This section describes the requirements and assumptions of these interface.</p>
<h3><a class="anchor" id="autotoc_md47"></a>
2.4.1 Mapping</h3>
<p>The map data format should be capable of describing typical indoor and outdoor environments encoutered by the robots.</p>
<p>Id | <a class="el" href="classHandle.html">Handle</a> | Priority | Description | Notes &ndash; | ---&mdash; | -----&mdash; | --------&mdash; | --&mdash; MAP001 | Mapping | 1 | The Mapping System SHALL provide map information to the Navigation System. MAP002 | Mapping.Data Model.Obstacles | 1 | Maps provided by Mapping Subsystem MUST indicate the location of known obstacles. MAP003 | Mapping.Data Model.Confidence Metric | 1 | Each known obstacle in a map SHALL have a confidence metric associated with it. MAP004 | Mapping.Data Model.Unknown Space | 1 | Maps provided by the Mapping Subsystem MUST indicate unmapped/unknown space. | Such as areas beyond the edge of the map, or areas within the map for which we didn't have any observations during map building. MAP005 | Mapping.Data Model.Surface Planarity | 1 | The map data format SHALL be capable of describing the planarity of traversable surfaces. | Can describe uneven ground. MAP006 | Mapping.Data Model.Safety Zone | 1 | The map data format SHALL be capable of defining regions where the robot may have to adjust its operations according to specified constraints. MAP007 | Mapping.Data Model.Safety Zone.Name | 1 | The map data format SHOULD allow for naming each safety zone. | <em>TODO: Does it need to be a unique name?</em> MAP008 | Mapping.Data Model.Safety Zone.Type | 1 | The map data format SHOULD allow for defining types of safety zones. | To allow for re-use of a safety zone type without redefining policy. Could be an "intersection" type, for example. May want to slot down at all intersections, for example. MAP009 | Mapping.Data Model.Safety Zone.Policy | 1 | The map data format SHALL be capable of expressing policy associated with each safety zone and safety zone type. | Maximum speed, (increased) distance to people, etc. MAP010 | Mapping.Data Model.Safety Zone.Policy.Keep Out Zone | 1 | The map data format SHALL be capable of expressing that a robot must not navigate through this zone. MAP011 | Mapping.Data Model.Lanes | 1 | The map data format SHALL be able to specify virtual lanes. | May prefer specified lanes in a warehouse, for example. MAP012 | Mapping.Data Model.Building Levels | 1 | The map data format SHALL be able to specify single and multi-level buildings. MAP013 | Mapping.Data Model.Building Levels.Level Connecting Features | 1 | The map data format SHALL be able to specify level-connecting features, such as elevators, stairways, and ramps. MAP014 | Mapping.Multiple Maps Per Environment | 1 | The Mapping System MAY provide multiple maps of the same environment. | Such as for different scales and elevations. MAP015 | Mapping.Data Model.Extensibility | 1 | The Mapping System SHOULD be extensible, to allow for the description of additional entities in the environment. MAP016 | Mapping.Dimensionality.2D | 1 | The Mapping System MUST provide 2<a class="el" href="classD.html">D</a> map information. MAP017 | Mapping.Dimensionality.2D+ | 1 | The Mapping System MAY provide 2D+ map information. MAP018 | Mapping.Dimensionality.3D | 1 | The Mapping System MAY provide 3<a class="el" href="classD.html">D</a> map information. MAP019 | Mapping.Dynamic Updates | 1 | The Mapping System SHOULD provide real-time updates of map information. | Allow for updates to the map to be pushed to clients. MAP020 | Mapping.Memory Optimization.Tiling | 1 | The Mapping System MAY provide the Navigation System with local map regions, sufficient for navigation. | Could provide relevant map tiles, for example, saving memory in the planners.</p>
<h3><a class="anchor" id="autotoc_md48"></a>
2.4.2 Perception</h3>
<p>The Perception Subsystem provides information about objects detected in the robot's environment. This information would typically be generated from a fusion of sensor input.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Id   </th><th class="markdownTableHeadNone"><a class="el" href="classHandle.html">Handle</a>   </th><th class="markdownTableHeadNone">Priority   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Notes    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PER001   </td><td class="markdownTableBodyNone">Perception   </td><td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">The Perception Subsystem SHALL provide information about the dynamic environment of the robot.   </td><td class="markdownTableBodyNone">Info sufficient to carry out the Navigation System requirements.   </td></tr>
</table>
<p>PER002 | Perception.Latency | 1 | <em>TODO</em></p>
<h3><a class="anchor" id="autotoc_md49"></a>
2.4.3 Prediction</h3>
<p>The Prediction Subsystem uses input from the Perception Subsystem and predicts the trajectories of the detected objects over time.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Id   </th><th class="markdownTableHeadNone"><a class="el" href="classHandle.html">Handle</a>   </th><th class="markdownTableHeadNone">Priority   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Notes    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PRE001   </td><td class="markdownTableBodyNone">Prediction.Object Prediction   </td><td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">The Prediction Subsystem SHOULD predict the trajectories of detected objects.   </td><td class="markdownTableBodyNone">One of the biggest shortcomings of the current system is the inability to model/predict where obstacles will be in the future. This leads to collisions with other moving objects   </td></tr>
</table>
<p>PRE002 | Prediction.Object Prediction.Time Horizon | 1 | <em>TODO: How far into the future should the object prediction work?</em></p>
<h3><a class="anchor" id="autotoc_md50"></a>
2.4.4 Localization</h3>
<p>The Navigation System requires the Robot's current pose, provided by an external Localization module. This section lists the requirements for the information provided by the the Localization Module.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Id   </th><th class="markdownTableHeadNone"><a class="el" href="classHandle.html">Handle</a>   </th><th class="markdownTableHeadNone">Priority   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Notes    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">LOC001   </td><td class="markdownTableBodyNone">Localization.Robot Pose   </td><td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">The Localization module MUST provide the robot's current pose to the Navigation System.   </td><td class="markdownTableBodyNone">This could be manual or as a result of automatic localization; the Navigation System wouldn't know either way.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">LOC002   </td><td class="markdownTableBodyNone">Localization.Robot Pose.Accuracy   </td><td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">The Localization Module MUST provide the estimated accuracy of the pose.   </td><td class="markdownTableBodyNone">So that Planning modules can determine if a particular Localization module has sufficient accuracy. Could use PoseWithCovariance message.   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md51"></a>
2.5 Open Issues</h2>
<ul>
<li>What are the performance goals for the ROS2 Navigation System?</li>
<li>What are the scalability for the ROS2 Navigaton System?</li>
<li>Any other important design goals to call out?</li>
<li>Should we specify a minimum target platform? Or, should this be expressed as minimum platform requirements?</li>
<li>What is the right latency value for detecting a collision?</li>
<li>Should we add any safety-related functionality at the robot interface level?</li>
<li>Do safety zones need unique names?</li>
<li>What is the target latency for the perception subsystem?</li>
<li>How far into the future should the object prediction work? </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
