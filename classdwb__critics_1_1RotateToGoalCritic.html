<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Auto OS: dwb_critics::RotateToGoalCritic Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Auto OS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>dwb_critics</b></li><li class="navelem"><a class="el" href="classdwb__critics_1_1RotateToGoalCritic.html">RotateToGoalCritic</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classdwb__critics_1_1RotateToGoalCritic-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">dwb_critics::RotateToGoalCritic Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Forces the commanded trajectories to only be rotations if within a certain distance window.  
 <a href="classdwb__critics_1_1RotateToGoalCritic.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="rotate__to__goal_8hpp_source.html">rotate_to_goal.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for dwb_critics::RotateToGoalCritic:</div>
<div class="dyncontent">
<div class="center"><img src="classdwb__critics_1_1RotateToGoalCritic__inherit__graph.png" border="0" usemap="#adwb__critics_1_1RotateToGoalCritic_inherit__map" alt="Inheritance graph"/></div>
<map name="adwb__critics_1_1RotateToGoalCritic_inherit__map" id="adwb__critics_1_1RotateToGoalCritic_inherit__map">
<area shape="rect" title="Forces the commanded trajectories to only be rotations if within a certain distance window." alt="" coords="5,79,196,119"/>
<area shape="rect" href="classdwb__core_1_1TrajectoryCritic.html" title="Evaluates a Trajectory2D to produce a score." alt="" coords="5,5,196,31"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for dwb_critics::RotateToGoalCritic:</div>
<div class="dyncontent">
<div class="center"><img src="classdwb__critics_1_1RotateToGoalCritic__coll__graph.png" border="0" usemap="#adwb__critics_1_1RotateToGoalCritic_coll__map" alt="Collaboration graph"/></div>
<map name="adwb__critics_1_1RotateToGoalCritic_coll__map" id="adwb__critics_1_1RotateToGoalCritic_coll__map">
<area shape="rect" title="Forces the commanded trajectories to only be rotations if within a certain distance window." alt="" coords="5,183,196,223"/>
<area shape="rect" href="classdwb__core_1_1TrajectoryCritic.html" title="Evaluates a Trajectory2D to produce a score." alt="" coords="5,108,196,133"/>
<area shape="rect" title=" " alt="" coords="71,5,130,31"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af83594cc5ccee9b6313be19439f099fd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdwb__critics_1_1RotateToGoalCritic.html#af83594cc5ccee9b6313be19439f099fd">onInit</a> () override</td></tr>
<tr class="separator:af83594cc5ccee9b6313be19439f099fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70632f7cd978e4b59ace51446228302f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdwb__critics_1_1RotateToGoalCritic.html#a70632f7cd978e4b59ace51446228302f">reset</a> () override</td></tr>
<tr class="memdesc:a70632f7cd978e4b59ace51446228302f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the state of the critic.  <br /></td></tr>
<tr class="separator:a70632f7cd978e4b59ace51446228302f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95c2443f44af50578b3d04fd4c7b7e3c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdwb__critics_1_1RotateToGoalCritic.html#a95c2443f44af50578b3d04fd4c7b7e3c">prepare</a> (const geometry_msgs::msg::Pose2D &amp;pose, const nav_2d_msgs::msg::Twist2D &amp;vel, const geometry_msgs::msg::Pose2D &amp;goal, const nav_2d_msgs::msg::Path2D &amp;global_plan) override</td></tr>
<tr class="memdesc:a95c2443f44af50578b3d04fd4c7b7e3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prior to evaluating any trajectories, look at contextual information constant across all trajectories.  <br /></td></tr>
<tr class="separator:a95c2443f44af50578b3d04fd4c7b7e3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7debded5bbc2f160cecfdc0bdbbd2d50"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdwb__critics_1_1RotateToGoalCritic.html#a7debded5bbc2f160cecfdc0bdbbd2d50">scoreTrajectory</a> (const dwb_msgs::msg::Trajectory2D &amp;traj) override</td></tr>
<tr class="memdesc:a7debded5bbc2f160cecfdc0bdbbd2d50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a raw score for the given trajectory.  <br /></td></tr>
<tr class="separator:a7debded5bbc2f160cecfdc0bdbbd2d50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c0f91a076a501b3897bd61df5aaf528"><td class="memItemLeft" align="right" valign="top">virtual double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdwb__critics_1_1RotateToGoalCritic.html#a7c0f91a076a501b3897bd61df5aaf528">scoreRotation</a> (const dwb_msgs::msg::Trajectory2D &amp;traj)</td></tr>
<tr class="memdesc:a7c0f91a076a501b3897bd61df5aaf528"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assuming that this is an actual rotation when near the goal, score the trajectory.  <br /></td></tr>
<tr class="separator:a7c0f91a076a501b3897bd61df5aaf528"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classdwb__core_1_1TrajectoryCritic"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classdwb__core_1_1TrajectoryCritic')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classdwb__core_1_1TrajectoryCritic.html">dwb_core::TrajectoryCritic</a></td></tr>
<tr class="memitem:af6fce4ceee2a2f7cccf24d823a72545f inherit pub_methods_classdwb__core_1_1TrajectoryCritic"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdwb__core_1_1TrajectoryCritic.html#af6fce4ceee2a2f7cccf24d823a72545f">initialize</a> (const nav2_util::LifecycleNode::SharedPtr &amp;nh, const std::string &amp;name, const std::string &amp;ns, std::shared_ptr&lt; <a class="el" href="classnav2__costmap__2d_1_1Costmap2DROS.html">nav2_costmap_2d::Costmap2DROS</a> &gt; costmap_ros)</td></tr>
<tr class="memdesc:af6fce4ceee2a2f7cccf24d823a72545f inherit pub_methods_classdwb__core_1_1TrajectoryCritic"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the critic with appropriate pointers and parameters.  <br /></td></tr>
<tr class="separator:af6fce4ceee2a2f7cccf24d823a72545f inherit pub_methods_classdwb__core_1_1TrajectoryCritic"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af95ddfbb974211b4e1b3f58fc0687e56 inherit pub_methods_classdwb__core_1_1TrajectoryCritic"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdwb__core_1_1TrajectoryCritic.html#af95ddfbb974211b4e1b3f58fc0687e56">onInit</a> ()</td></tr>
<tr class="separator:af95ddfbb974211b4e1b3f58fc0687e56 inherit pub_methods_classdwb__core_1_1TrajectoryCritic"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76bf50ae6acdf57634cfd7cb089d6197 inherit pub_methods_classdwb__core_1_1TrajectoryCritic"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdwb__core_1_1TrajectoryCritic.html#a76bf50ae6acdf57634cfd7cb089d6197">reset</a> ()</td></tr>
<tr class="memdesc:a76bf50ae6acdf57634cfd7cb089d6197 inherit pub_methods_classdwb__core_1_1TrajectoryCritic"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the state of the critic.  <br /></td></tr>
<tr class="separator:a76bf50ae6acdf57634cfd7cb089d6197 inherit pub_methods_classdwb__core_1_1TrajectoryCritic"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15e9e3b61af2785542957cced1592529 inherit pub_methods_classdwb__core_1_1TrajectoryCritic"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdwb__core_1_1TrajectoryCritic.html#a15e9e3b61af2785542957cced1592529">prepare</a> (const geometry_msgs::msg::Pose2D &amp;, const nav_2d_msgs::msg::Twist2D &amp;, const geometry_msgs::msg::Pose2D &amp;, const nav_2d_msgs::msg::Path2D &amp;)</td></tr>
<tr class="memdesc:a15e9e3b61af2785542957cced1592529 inherit pub_methods_classdwb__core_1_1TrajectoryCritic"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prior to evaluating any trajectories, look at contextual information constant across all trajectories.  <br /></td></tr>
<tr class="separator:a15e9e3b61af2785542957cced1592529 inherit pub_methods_classdwb__core_1_1TrajectoryCritic"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32b48699795843f210b72f1dbe35efc6 inherit pub_methods_classdwb__core_1_1TrajectoryCritic"><td class="memItemLeft" align="right" valign="top">virtual double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdwb__core_1_1TrajectoryCritic.html#a32b48699795843f210b72f1dbe35efc6">scoreTrajectory</a> (const dwb_msgs::msg::Trajectory2D &amp;traj)=0</td></tr>
<tr class="memdesc:a32b48699795843f210b72f1dbe35efc6 inherit pub_methods_classdwb__core_1_1TrajectoryCritic"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a raw score for the given trajectory.  <br /></td></tr>
<tr class="separator:a32b48699795843f210b72f1dbe35efc6 inherit pub_methods_classdwb__core_1_1TrajectoryCritic"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa04dcaf28eda5e746172026d0475a2b3 inherit pub_methods_classdwb__core_1_1TrajectoryCritic"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdwb__core_1_1TrajectoryCritic.html#aa04dcaf28eda5e746172026d0475a2b3">debrief</a> (const nav_2d_msgs::msg::Twist2D &amp;)</td></tr>
<tr class="memdesc:aa04dcaf28eda5e746172026d0475a2b3 inherit pub_methods_classdwb__core_1_1TrajectoryCritic"><td class="mdescLeft">&#160;</td><td class="mdescRight">debrief informs the critic what the chosen cmd_vel was (if it cares)  <br /></td></tr>
<tr class="separator:aa04dcaf28eda5e746172026d0475a2b3 inherit pub_methods_classdwb__core_1_1TrajectoryCritic"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b6dba2ee735fc394449547d7255a22d inherit pub_methods_classdwb__core_1_1TrajectoryCritic"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdwb__core_1_1TrajectoryCritic.html#a8b6dba2ee735fc394449547d7255a22d">addCriticVisualization</a> (std::vector&lt; std::pair&lt; std::string, std::vector&lt; float &gt; &gt; &gt; &amp;)</td></tr>
<tr class="memdesc:a8b6dba2ee735fc394449547d7255a22d inherit pub_methods_classdwb__core_1_1TrajectoryCritic"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add information to the given pointcloud for debugging costmap-grid based scores.  <br /></td></tr>
<tr class="separator:a8b6dba2ee735fc394449547d7255a22d inherit pub_methods_classdwb__core_1_1TrajectoryCritic"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e6f75f59dae1fbbb5f4abaa23494285 inherit pub_methods_classdwb__core_1_1TrajectoryCritic"><td class="memItemLeft" align="right" valign="top"><a id="a5e6f75f59dae1fbbb5f4abaa23494285" name="a5e6f75f59dae1fbbb5f4abaa23494285"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><b>getName</b> ()</td></tr>
<tr class="separator:a5e6f75f59dae1fbbb5f4abaa23494285 inherit pub_methods_classdwb__core_1_1TrajectoryCritic"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18601757c2f75f936e110f69abca9f3c inherit pub_methods_classdwb__core_1_1TrajectoryCritic"><td class="memItemLeft" align="right" valign="top"><a id="a18601757c2f75f936e110f69abca9f3c" name="a18601757c2f75f936e110f69abca9f3c"></a>
virtual double&#160;</td><td class="memItemRight" valign="bottom"><b>getScale</b> () const</td></tr>
<tr class="separator:a18601757c2f75f936e110f69abca9f3c inherit pub_methods_classdwb__core_1_1TrajectoryCritic"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a6c9a173b58b31cdf8c1486f201f5de inherit pub_methods_classdwb__core_1_1TrajectoryCritic"><td class="memItemLeft" align="right" valign="top"><a id="a1a6c9a173b58b31cdf8c1486f201f5de" name="a1a6c9a173b58b31cdf8c1486f201f5de"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>setScale</b> (const double scale)</td></tr>
<tr class="separator:a1a6c9a173b58b31cdf8c1486f201f5de inherit pub_methods_classdwb__core_1_1TrajectoryCritic"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_types_classdwb__core_1_1TrajectoryCritic"><td colspan="2" onclick="javascript:toggleInherit('pub_types_classdwb__core_1_1TrajectoryCritic')"><img src="closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="classdwb__core_1_1TrajectoryCritic.html">dwb_core::TrajectoryCritic</a></td></tr>
<tr class="memitem:a089879d4a4f494deb96350bc1c3c3327 inherit pub_types_classdwb__core_1_1TrajectoryCritic"><td class="memItemLeft" align="right" valign="top"><a id="a089879d4a4f494deb96350bc1c3c3327" name="a089879d4a4f494deb96350bc1c3c3327"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>Ptr</b> = std::shared_ptr&lt; <a class="el" href="classdwb__core_1_1TrajectoryCritic.html">dwb_core::TrajectoryCritic</a> &gt;</td></tr>
<tr class="separator:a089879d4a4f494deb96350bc1c3c3327 inherit pub_types_classdwb__core_1_1TrajectoryCritic"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classdwb__core_1_1TrajectoryCritic"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classdwb__core_1_1TrajectoryCritic')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classdwb__core_1_1TrajectoryCritic.html">dwb_core::TrajectoryCritic</a></td></tr>
<tr class="memitem:a57f1789a23a61ac4b099efb09e43dd4e inherit pro_attribs_classdwb__core_1_1TrajectoryCritic"><td class="memItemLeft" align="right" valign="top"><a id="a57f1789a23a61ac4b099efb09e43dd4e" name="a57f1789a23a61ac4b099efb09e43dd4e"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><b>name_</b></td></tr>
<tr class="separator:a57f1789a23a61ac4b099efb09e43dd4e inherit pro_attribs_classdwb__core_1_1TrajectoryCritic"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae62b2d03deb299ddd1648ddc4357b9c1 inherit pro_attribs_classdwb__core_1_1TrajectoryCritic"><td class="memItemLeft" align="right" valign="top"><a id="ae62b2d03deb299ddd1648ddc4357b9c1" name="ae62b2d03deb299ddd1648ddc4357b9c1"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><b>dwb_plugin_name_</b></td></tr>
<tr class="separator:ae62b2d03deb299ddd1648ddc4357b9c1 inherit pro_attribs_classdwb__core_1_1TrajectoryCritic"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12f0729fb83bb0075b675e3dd67e3544 inherit pro_attribs_classdwb__core_1_1TrajectoryCritic"><td class="memItemLeft" align="right" valign="top"><a id="a12f0729fb83bb0075b675e3dd67e3544" name="a12f0729fb83bb0075b675e3dd67e3544"></a>
std::shared_ptr&lt; <a class="el" href="classnav2__costmap__2d_1_1Costmap2DROS.html">nav2_costmap_2d::Costmap2DROS</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>costmap_ros_</b></td></tr>
<tr class="separator:a12f0729fb83bb0075b675e3dd67e3544 inherit pro_attribs_classdwb__core_1_1TrajectoryCritic"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2354066bb35712a5a7c762c37aa3988a inherit pro_attribs_classdwb__core_1_1TrajectoryCritic"><td class="memItemLeft" align="right" valign="top"><a id="a2354066bb35712a5a7c762c37aa3988a" name="a2354066bb35712a5a7c762c37aa3988a"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>scale_</b></td></tr>
<tr class="separator:a2354066bb35712a5a7c762c37aa3988a inherit pro_attribs_classdwb__core_1_1TrajectoryCritic"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f61b9ff8cc03b9e7301b7c3bd80b625 inherit pro_attribs_classdwb__core_1_1TrajectoryCritic"><td class="memItemLeft" align="right" valign="top"><a id="a8f61b9ff8cc03b9e7301b7c3bd80b625" name="a8f61b9ff8cc03b9e7301b7c3bd80b625"></a>
rclcpp_lifecycle::LifecycleNode::WeakPtr&#160;</td><td class="memItemRight" valign="bottom"><b>node_</b></td></tr>
<tr class="separator:a8f61b9ff8cc03b9e7301b7c3bd80b625 inherit pro_attribs_classdwb__core_1_1TrajectoryCritic"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Forces the commanded trajectories to only be rotations if within a certain distance window. </p>
<p>This used to be built in to the DWA Local Planner as the LatchedStopRotate controller, but has been moved to a critic for consistency.</p>
<p>The critic has three distinct phases. 1) If the current pose is outside xy_goal_tolerance LINEAR distance from the goal pose, this critic will just return score 0.0. 2) If within the xy_goal_tolerance and the robot is still moving with non-zero linear motion, this critic will only allow trajectories that are slower than the current speed in order to stop the robot (within the robot's acceleration limits). The returned score will be the robot's linear speed squared, multiplied by the slowing_factor parameter (default 5.0) added to the result of scoreRotation. 3) If within the xy_goal_tolerance and the robot has sufficiently small linear motion, this critic will score trajectories that have linear movement as invalid and score the rest based on the result of the scoreRotation method</p>
<p>The scoreRotation method can be overriden, but the default behavior is to return the shortest angular distance between the goal pose and a pose from the trajectory. Which pose depends on the lookahead_time parameter.</p><ul>
<li>If the lookahead_time parameter is negative, the pose evaluated will be the last pose in the trajectory, which is the same as DWA's behavior. This is the default.</li>
<li>Otherwise, a new pose will be projected using the dwb_local_planner::projectPose. By using a lookahead time shorter than sim_time, the critic will be less concerned about overshooting the goal yaw and thus will continue to turn faster for longer. </li>
</ul>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="af83594cc5ccee9b6313be19439f099fd" name="af83594cc5ccee9b6313be19439f099fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af83594cc5ccee9b6313be19439f099fd">&#9670;&#160;</a></span>onInit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void dwb_critics::RotateToGoalCritic::onInit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="classdwb__core_1_1TrajectoryCritic.html">dwb_core::TrajectoryCritic</a>.</p>

</div>
</div>
<a id="a95c2443f44af50578b3d04fd4c7b7e3c" name="a95c2443f44af50578b3d04fd4c7b7e3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95c2443f44af50578b3d04fd4c7b7e3c">&#9670;&#160;</a></span>prepare()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool dwb_critics::RotateToGoalCritic::prepare </td>
          <td>(</td>
          <td class="paramtype">const geometry_msgs::msg::Pose2D &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const nav_2d_msgs::msg::Twist2D &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const geometry_msgs::msg::Pose2D &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const nav_2d_msgs::msg::Path2D &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prior to evaluating any trajectories, look at contextual information constant across all trajectories. </p>
<p>Subclasses may overwrite. Return false in case there is any error.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pose</td><td>Current pose (costmap frame) </td></tr>
    <tr><td class="paramname">vel</td><td>Current velocity </td></tr>
    <tr><td class="paramname">goal</td><td>The final goal (costmap frame) </td></tr>
    <tr><td class="paramname">global_plan</td><td>Transformed global plan in costmap frame, possibly cropped to nearby points </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classdwb__core_1_1TrajectoryCritic.html#a15e9e3b61af2785542957cced1592529">dwb_core::TrajectoryCritic</a>.</p>

</div>
</div>
<a id="a70632f7cd978e4b59ace51446228302f" name="a70632f7cd978e4b59ace51446228302f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70632f7cd978e4b59ace51446228302f">&#9670;&#160;</a></span>reset()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void dwb_critics::RotateToGoalCritic::reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reset the state of the critic. </p>
<p>Reset is called when the planner receives a new global plan. This can be used to discard information specific to one plan. </p>

<p>Reimplemented from <a class="el" href="classdwb__core_1_1TrajectoryCritic.html#a76bf50ae6acdf57634cfd7cb089d6197">dwb_core::TrajectoryCritic</a>.</p>

</div>
</div>
<a id="a7c0f91a076a501b3897bd61df5aaf528" name="a7c0f91a076a501b3897bd61df5aaf528"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c0f91a076a501b3897bd61df5aaf528">&#9670;&#160;</a></span>scoreRotation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double dwb_critics::RotateToGoalCritic::scoreRotation </td>
          <td>(</td>
          <td class="paramtype">const dwb_msgs::msg::Trajectory2D &amp;&#160;</td>
          <td class="paramname"><em>traj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Assuming that this is an actual rotation when near the goal, score the trajectory. </p>
<p>This (easily overridden) method assumes that the critic is in the third phase (as described above) and returns a numeric score for the trajectory relative to the goal yaw. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">traj</td><td>Trajectory to score </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>numeric score </dd></dl>

</div>
</div>
<a id="a7debded5bbc2f160cecfdc0bdbbd2d50" name="a7debded5bbc2f160cecfdc0bdbbd2d50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7debded5bbc2f160cecfdc0bdbbd2d50">&#9670;&#160;</a></span>scoreTrajectory()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double dwb_critics::RotateToGoalCritic::scoreTrajectory </td>
          <td>(</td>
          <td class="paramtype">const dwb_msgs::msg::Trajectory2D &amp;&#160;</td>
          <td class="paramname"><em>traj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return a raw score for the given trajectory. </p>
<p>scores &lt; 0 are considered invalid/errors, such as collisions This is the raw score in that the scale should not be applied to it. </p>

<p>Implements <a class="el" href="classdwb__core_1_1TrajectoryCritic.html#a32b48699795843f210b72f1dbe35efc6">dwb_core::TrajectoryCritic</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>nav2_pkgs/nav2_dwb_controller/dwb_critics/include/dwb_critics/<a class="el" href="rotate__to__goal_8hpp_source.html">rotate_to_goal.hpp</a></li>
<li>nav2_pkgs/nav2_dwb_controller/dwb_critics/src/rotate_to_goal.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
